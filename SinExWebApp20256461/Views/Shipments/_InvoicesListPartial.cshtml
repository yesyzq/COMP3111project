@model IEnumerable<SinExWebApp20256461.ViewModels.InvoicesListViewModel>

@if (Model.Any())
{
    <p>The following are the invoices for the specified account.</p>
    <table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.WaybillNumber)
            </th>
            <th>
                @Html.ActionLink("ServiceType", "GenerateInvoiceReport", new
           {
               sortOrder = ViewBag.ServiceTypeSortParm,
               ShippingAccountNumber = ViewBag.CurrentShippingAccountNumber
           })
            </th>
            <th>
                @Html.ActionLink("ShippedDate", "GenerateInvoiceReport", new
           {
               sortOrder = ViewBag.ShippedDateSortParm,
               ShippingAccountNumber = ViewBag.CurrentShippingAccountNumber
           })
            </th>
            <th>
                @Html.ActionLink("RecipientName", "GenerateInvoiceReport", new
           {
               sortOrder = ViewBag.RecipientNameSortParm,
               ShippingAccountNumber = ViewBag.CurrentShippingAccountNumber
           })
            </th>
            <th>
                @Html.ActionLink("TotalInvoiceAmount", "GenerateInvoiceReport", new
           {
               sortOrder = ViewBag.TotalAmountPayableSortParm,
               ShippingAccountNumber = ViewBag.CurrentShippingAccountNumber
           })
            </th>
            <th>
                @Html.ActionLink("Origin", "GenerateInvoiceReport", new
           {
               sortOrder = ViewBag.OriginSortParm,
               ShippingAccountNumber = ViewBag.CurrentShippingAccountNumber
           })
            </th>
            <th>
                @Html.ActionLink("Destination", "GenerateInvoiceReport", new
           {
               sortOrder = ViewBag.DestinationSortParm,
               ShippingAccountNumber = ViewBag.CurrentShippingAccountNumber
           })
            </th>
            <th>
                @Html.ActionLink("ShippingAccountNumber", "GenerateInvoiceReport", new
           {
               sortOrder = ViewBag.ShippingAccountIdSortParm,
               ShippingAccountNumber = ViewBag.CurrentShippingAccountNumber
           })
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Type)
            </th>
        </tr>
        @foreach (var item in Model)
        {
            <tr>
            <th>
                @if (System.IO.File.Exists(Path.Combine(Server.MapPath("~/Invoices"), item.WaybillNumber + "_total.pdf")))
            {
                @Html.ActionLink(item.WaybillNumber, "DisplayInvoice", new { WaybillNumber = item.WaybillNumber }, new { target = "_blank" })
            }
                else
            {
                @Html.DisplayFor(modelItem => item.WaybillNumber)
            }
            </th>
            <th>
                @Html.DisplayFor(modelItem => item.ServiceType)
            </th>
            <th>
                @Html.DisplayFor(modelItem => item.ShippedDate)
            </th>
            <th>
                @Html.DisplayFor(modelItem => item.RecipientName)
            </th>
            <th>
                @Html.DisplayFor(modelItem => item.TotalAmountPayable)
            </th>
            <th>
                @Html.DisplayFor(modelItem => item.Origin)
            </th>
            <th>
                @Html.DisplayFor(modelItem => item.Destination)
            </th>
            <th>
                @Html.DisplayFor(modelItem => item.ShippingAccountNumber)
            </th>
            <th>
                @Html.DisplayFor(modelItem => item.Type)
            </th>
        </tr>
        }
    </table>
}